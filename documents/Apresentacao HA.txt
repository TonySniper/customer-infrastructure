

Contexto do cliente

-10 aplicacoes wordpress replicados em dois servidores, o que da 20 aplicacoes no total 
-1 banco de dados replicado em 2 servidores atras de um HA proxy pra ter HA
-Estes servidores sao gerenciado pelo proprio cliente
-Alguns dos sites cresceram em popularidade e experienciam instabilidades em momentos especificos do dia devido ao alto trafego inesperado de usuarios
-O cliente gostaria de migrar essas aplicacoes para a nuvem publica
-Somente aplicacoes wordpress serao desenvolvidas
-5 aplicacoes serao add em doze meses.

Requisitos do cliente

-Alta disponibilidade HA
-Escalabilidade para lidar com sudden trafego alto de usuarios sem passar mal
-Flexibilidade para adicionar novas aplicacoes na nuvem sem esforco 
-Futuro prova

Proposta tecnica

-Deploy a aplicacao em duas regioes diferentes
-Database server compartilhado entre todas as aplicacoes. Possui failover group em outra regiao - shared
-Azure front door para gerenciar trafego para aplicacao mais proxima geograficamente - shared
-Storage account GRS por aplicacao para armazenamento de media
-CDN com caching para entrega da midia - shared
-KeyVault para guardar informacoes/secrets da aplicacao - shared? 

Azure specifics

-Aplicacoes serao WebApps com PHP runtime (em andamento)
-Autoscaling pros webapps no app service plan
-RBAC pro KeyVault; RBAC remove o requerimento de credenciais
-Alertas pra coisas duvidosas com azure monitor
-Db sera MySQL no Azure com failover groups. 1 Para todos apps 
-Storage account GRS ou LRS. 1 por app
-Azure front door com CDN (talvez trocar cdn pelo Azure CDN)
-Ainda nao foi nada decidido sobre VNETs, talvez 1 vnet por regiao 
-Recovery Services Vault para back up do banco ou de alguma coisa (pesquisar sobre)
-Monitoramento com Application Insights - OUT porque app insights so pra .net app;